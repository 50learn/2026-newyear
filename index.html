<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç´…åŒ…ä»»å‹™ç¾å ´å¤§è¢å¹•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@900&display=swap');
        .festive { font-family: 'Noto Serif TC', serif; }
        .bg-pattern { background-color: #7f1d1d; background-image: radial-gradient(#991b1b 1px, transparent 0); background-size: 40px 40px; }
        .glass { background: rgba(153, 27, 27, 0.8); backdrop-filter: blur(10px); border: 2px solid rgba(250, 204, 21, 0.3); }
    </style>
</head>
<body class="bg-pattern min-h-screen text-white p-4 flex flex-col items-center">

    <div class="w-full max-w-4xl glass rounded-3xl p-6 mb-6 flex justify-between items-center shadow-2xl">
        <div class="flex items-center gap-4">
            <div class="text-6xl">ğŸ§§</div>
            <div class="text-left">
                <h1 class="text-3xl festive text-yellow-400">2026 åœçˆæŒ‘æˆ°</h1>
                <p class="text-red-300 text-sm italic underline">ä¸»æŒäººæ­£åœ¨æ“æ§ä¸­...</p>
            </div>
        </div>
        <div class="text-right">
            <p class="text-yellow-500 text-xs font-bold uppercase tracking-widest">ç´¯ç©ç´…åŒ…</p>
            <span id="score" class="text-7xl font-black text-white">0</span>
        </div>
    </div>

    <main class="w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-6">
        
        <section class="glass rounded-[2rem] p-8 flex flex-col items-center shadow-xl">
            <h2 class="text-2xl festive text-yellow-400 mb-6">ğŸ¤ å°èªæ­ŒæŒ‘æˆ°</h2>
            <div id="song-box" class="w-full h-32 flex items-center justify-center bg-black/30 rounded-2xl mb-6 border-2 border-dashed border-red-500">
                <p id="song-display" class="text-3xl font-serif text-center px-4">è«‹é»æ“ŠæŠ½æ­Œ</p>
            </div>
            <div class="flex flex-col w-full gap-3">
                <button onclick="drawSong()" class="w-full py-4 bg-red-600 rounded-xl font-bold border-b-4 border-red-800 active:border-b-0 active:translate-y-1 transition-all">ğŸ² éš¨æ©ŸæŠ½æ­Œ</button>
                <button id="song-reward" onclick="rewardSong()" class="w-full py-4 bg-yellow-500 text-red-900 rounded-xl font-black text-xl opacity-50 pointer-events-none">å®Œæˆåˆå”±é ˜ç´…åŒ…</button>
            </div>
        </section>

        <section class="glass rounded-[2rem] p-8 shadow-xl">
            <h2 class="text-2xl festive text-yellow-400 mb-6 text-center">ğŸ¯ é»˜å¥‘ç›²æ¸¬</h2>
            
            <div id="input-ui">
                <div class="flex gap-2 mb-4">
                    <button id="tab-c" onclick="switchInput('child')" class="flex-1 py-2 bg-yellow-500 text-red-900 font-bold rounded-t-lg">ğŸ‘¦ å°å­©å¡«</button>
                    <button id="tab-p" onclick="switchInput('parent')" class="flex-1 py-2 bg-red-800 text-red-200 font-bold rounded-t-lg">ğŸ‘¨â€ğŸ¦³ å®¶é•·å¡«</button>
                </div>
                <input type="text" id="ans-input" placeholder="ä¸»æŒäººåœ¨æ­¤éŒ„å…¥ç­”æ¡ˆ..." class="w-full p-4 bg-red-900 border-2 border-yellow-600 rounded-xl text-2xl text-center mb-6 focus:ring-4 ring-yellow-400 outline-none">
                <button onclick="lockAns()" class="w-full py-4 bg-orange-600 rounded-xl font-bold shadow-lg">ğŸ”’ é–å®šæ­¤äººç­”æ¡ˆ</button>
            </div>

            <div id="reveal-ui" class="hidden flex flex-col items-center justify-center h-full">
                <p class="text-yellow-400 mb-4 font-bold">é›™æ–¹ç­”æ¡ˆå·²å°±ç·’ï¼</p>
                <button onclick="bigReveal()" class="w-full py-8 bg-yellow-400 text-red-900 text-4xl font-black rounded-3xl shadow-[0_10px_0_0_#b45309] animate-bounce">ğŸ”¥ æ­æ›‰ç­”æ¡ˆ</button>
            </div>
        </section>
    </main>

    <div id="overlay" class="fixed inset-0 bg-red-900 z-50 hidden flex flex-col items-center justify-center p-10">
        <h2 class="text-4xl text-yellow-400 festive mb-12">çœŸç›¸å¤§ç™½ï¼</h2>
        <div class="flex w-full max-w-5xl gap-10 h-64 mb-12">
            <div class="flex-1 bg-white rounded-3xl flex flex-col items-center justify-center shadow-2xl">
                <span class="text-red-800 font-bold mb-4">ğŸ‘¦ å°å­©èªªï¼š</span>
                <p id="show-c" class="text-6xl text-red-600 font-black festive">?</p>
            </div>
            <div class="flex items-center text-7xl font-black text-yellow-500 italic">VS</div>
            <div class="flex-1 bg-white rounded-3xl flex flex-col items-center justify-center shadow-2xl">
                <span class="text-red-800 font-bold mb-4">ğŸ‘¨â€ğŸ¦³ å®¶é•·èªªï¼š</span>
                <p id="show-p" class="text-6xl text-red-600 font-black festive">?</p>
            </div>
        </div>
        <button onclick="finalJudge()" class="px-20 py-8 bg-yellow-400 text-red-900 text-4xl font-black rounded-full">åˆ¤å®šçµæœ</button>
    </div>

    <script>
        let state = { count: 0, currentSong: "", cAns: "", pAns: "", role: 'child' };
        const SONGS = ["æµ·æ³¢æµª", "é›ªä¸­ç´…", "é›™äººæ•é ­", "èˆå¥³", "æ„›ä½ ä¸€è¬å¹´"];

        function updateScore() { document.getElementById('score').innerText = state.count; }

        function drawSong() {
            state.currentSong = SONGS[Math.floor(Math.random()*SONGS.length)];
            document.getElementById('song-display').innerText = `ã€Š${state.currentSong}ã€‹`;
            document.getElementById('song-reward').classList.remove('opacity-50', 'pointer-events-none');
        }

        function rewardSong() {
            state.count++; updateScore();
            confetti({ particleCount: 150, spread: 70 });
            document.getElementById('song-reward').classList.add('opacity-50', 'pointer-events-none');
        }

        function switchInput(r) {
            state.role = r;
            document.getElementById('tab-c').className = r === 'child' ? 'flex-1 py-2 bg-yellow-500 text-red-900 font-bold rounded-t-lg' : 'flex-1 py-2 bg-red-800 text-red-200 font-bold rounded-t-lg';
            document.getElementById('tab-p').className = r === 'parent' ? 'flex-1 py-2 bg-yellow-500 text-red-900 font-bold rounded-t-lg' : 'flex-1 py-2 bg-red-800 text-red-200 font-bold rounded-t-lg';
            document.getElementById('ans-input').value = r === 'child' ? state.cAns : state.pAns;
        }

        function lockAns() {
            const val = document.getElementById('ans-input').value;
            if (state.role === 'child') state.cAns = val; else state.pAns = val;
            if (state.cAns && state.pAns) {
                document.getElementById('input-ui').classList.add('hidden');
                document.getElementById('reveal-ui').classList.remove('hidden');
            } else {
                alert(`${state.role === 'child' ? 'å°å­©' : 'å®¶é•·'}ç­”æ¡ˆå·²éŒ„å…¥ï¼è«‹åˆ‡æ›éŒ„å…¥å¦ä¸€æ–¹ã€‚`);
            }
        }

        function bigReveal() {
            document.getElementById('show-c').innerText = state.cAns;
            document.getElementById('show-p').innerText = state.pAns;
            document.getElementById('overlay').classList.remove('hidden');
        }

        function finalJudge() {
            if (state.cAns.trim() === state.pAns.trim()) {
                state.count++; updateScore();
                confetti({ particleCount: 300, spread: 100 });
                alert("ğŸ‰ é»˜å¥‘æ»¿åˆ†ï¼ç´…åŒ… +1ï¼");
            } else {
                alert("ğŸ’” å“å‘€ï¼Œé»˜å¥‘å·®ä¸€é»é»ï¼");
            }
            document.getElementById('overlay').classList.add('hidden');
            document.getElementById('input-ui').classList.remove('hidden');
            document.getElementById('reveal-ui').classList.add('hidden');
            state.cAns = ""; state.pAns = ""; document.getElementById('ans-input').value = "";
        }
    </script>
</body>
</html>
